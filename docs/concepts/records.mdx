---
title: "Records"
description: "understanding atproto records and collections"
---

# records

records are the fundamental unit of data in atproto. everything you create - posts, likes, follows, profiles - is a record stored in a collection.

## what is a record?

a record is a json object with:
- **type**: defined by a lexicon schema (e.g., `app.bsky.feed.post`)
- **data**: the actual content (text, metadata, refs to other records/blobs)
- **metadata**: creation time, creator did, cid (content hash)

example post record:
```json
{
  "$type": "app.bsky.feed.post",
  "text": "hello atproto!",
  "createdAt": "2025-11-08T00:00:00.000Z",
  "langs": ["en"]
}
```

## record uris

every record has a unique **at-uri** (at protocol uri):

```
at://did:plc:p3qjmlvg74omu2fv5ctylzkm/app.bsky.feed.post/3m4ryxwq5dt2i
└─┘   └──────────────────────────────┘ └──────────────────┘ └─────────┘
 │              DID (repo)                  collection          rkey
```

parts:
- **at://**: protocol scheme
- **did**: identifies the repository (user's data store)
- **collection**: type of record (nsid format)
- **rkey**: record key (unique within collection)

## collections

collections group records of the same type:

| collection | contains |
|-----------|----------|
| `app.bsky.feed.post` | posts/skeets |
| `app.bsky.feed.like` | likes |
| `app.bsky.graph.follow` | follows |
| `app.bsky.actor.profile` | user profiles |
| `app.bsky.feed.repost` | reposts |

each collection is defined by a **lexicon** schema that specifies:
- required fields
- optional fields
- field types and formats
- validation rules

## record keys (rkeys)

the rkey is the unique identifier within a collection:

### tid format
most records use **tid** (timestamp identifier):
- example: `3m4ryxwq5dt2i`
- sortable chronologically
- unique (includes random component)
- generated on creation

### self format
some collections use fixed keys:
- profiles: `app.bsky.actor.profile/self`
- always one record per repo

### custom format
some allow custom rkeys:
- must be valid: `[a-zA-Z0-9_\-\.]+`
- max 512 characters

## crud operations

### create
```bash
pdsx create app.bsky.feed.post text='hello world'
```

creates new record with auto-generated rkey.

### read (list)
```bash
# list your posts
pdsx ls app.bsky.feed.post

# list someone else's posts (no auth needed)
pdsx -r jlowin.dev ls app.bsky.feed.post --limit 10
```

### read (get)
```bash
# get specific record by uri
pdsx get at://did:plc:.../app.bsky.feed.post/3m4ryxwq5dt2i

# shorthand when authenticated
pdsx get app.bsky.feed.post/3m4ryxwq5dt2i
```

### update
```bash
# update your profile bio
pdsx edit app.bsky.actor.profile/self description='new bio'

# update specific post
pdsx edit app.bsky.feed.post/3m4ryxwq5dt2i text='edited text'
```

### delete
```bash
# delete a post
pdsx rm app.bsky.feed.post/3m4ryxwq5dt2i
```

## record structure

### required metadata

every record includes:
```json
{
  "$type": "app.bsky.feed.post",  // lexicon type
  "createdAt": "2025-11-08T00:00:00.000Z"  // iso 8601 timestamp
}
```

pdsx auto-adds these if you don't provide them.

### common fields

many record types include:
- `text`: content text
- `langs`: language codes (["en"], ["ja"], etc)
- `labels`: content labels/warnings
- `facets`: rich text features (mentions, links, hashtags)

### references

records can reference other records:
```json
{
  "$type": "app.bsky.feed.like",
  "subject": {
    "uri": "at://did:plc:.../app.bsky.feed.post/abc123",
    "cid": "bafyrei..."
  },
  "createdAt": "2025-11-08T00:00:00.000Z"
}
```

the `subject` is a **strong ref** (uri + cid) ensuring referential integrity.

### embedded content

records can embed blobs and other records:
```json
{
  "$type": "app.bsky.feed.post",
  "text": "check out this pic",
  "embed": {
    "$type": "app.bsky.embed.images",
    "images": [{
      "image": {
        "$type": "blob",
        "ref": {"$link": "bafkreif..."},
        "mimeType": "image/jpeg",
        "size": 49004
      },
      "alt": "photo description"
    }]
  },
  "createdAt": "2025-11-08T00:00:00.000Z"
}
```

## working with records

### listing with filters

```bash
# limit results
pdsx ls app.bsky.feed.post --limit 5

# different output formats
pdsx ls app.bsky.feed.post -o json
pdsx ls app.bsky.feed.post -o yaml
pdsx ls app.bsky.feed.post -o table
```

### piping json output

```bash
# extract all post text
pdsx ls app.bsky.feed.post -o json | jq -r '.[] | .text'

# filter by content
pdsx -r user.bsky.social ls app.bsky.feed.post -o json | \
  jq '.[] | select(.text | contains("atproto"))'

# count records
pdsx ls app.bsky.feed.post -o json | jq 'length'
```

### pagination

large collections require pagination:

```bash
# get first page
pdsx ls app.bsky.feed.post --limit 50

# get next page (copy cursor from output)
pdsx ls app.bsky.feed.post --limit 50 --cursor <cursor>
```

see [pagination.mdx](./pagination.mdx) for detailed guide.

## authentication

### reads
reads with `--repo` flag don't need auth:

```bash
# no auth needed
pdsx -r jlowin.dev ls app.bsky.feed.post
pdsx -r did:plc:... get app.bsky.actor.profile/self
```

### writes
all write operations require auth:

```bash
export ATPROTO_HANDLE=your.handle
export ATPROTO_PASSWORD=your-password

pdsx create app.bsky.feed.post text='hello'
pdsx edit app.bsky.actor.profile/self description='new bio'
pdsx rm app.bsky.feed.post/abc123
```

## best practices

### always include $type
pdsx auto-adds it, but when constructing records manually:

```json
{
  "$type": "app.bsky.feed.post",  // required
  "text": "content",
  "createdAt": "2025-11-08T00:00:00.000Z"
}
```

### use timestamps properly
```bash
# pdsx auto-generates if missing
pdsx create app.bsky.feed.post text='hello'

# or provide your own (iso 8601)
pdsx create app.bsky.feed.post \
  text='hello' \
  createdAt='2025-11-08T12:00:00.000Z'
```

### validate before creating
know the lexicon schema for your record type:
- what fields are required?
- what are the type constraints?
- what references are needed?

pdsx currently has minimal client-side validation (see issue #18).

## see also

- [pagination](./pagination.mdx) - working with large collections
- [blobs](./blobs.mdx) - uploading binary content
- [atproto lexicons](https://atproto.com/specs/lexicon) - schema definitions
- [repository spec](https://atproto.com/specs/repository) - how records are stored
